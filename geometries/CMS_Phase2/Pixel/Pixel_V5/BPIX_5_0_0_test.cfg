  Barrel PXB {
    //@include ../Supports/SupportsBPIX_V0_1_4modules.cfg
    //@include-std CMS_Phase2/Pixel/Conversions/flange_BPIX
    //@include stations_BPIX_Service_Cylinder_near
    
    //phiSegments 4
    bigDelta 1.5
    //phiOverlap 0.80
    zOverlap -0.2 // 200 um gap along the stave
    beamSpotCover false
    smallDelta 0 
    numLayers 4
    startZMode modulecenter
    compressed false
    innerRadius 29
    outerRadius 140    // ??

    smallParity 1
    bigParity -1

    Layer 1 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_1x1_50x50
      //@includestd CMS_Phase2/Pixel/Materials/module_BPIX_v2_L1_1x2_2500
      //@includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L1
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_50x50
      destination BPIX1
      layerRotation 0.262
      
      isTilted true
      isTiltedAuto true
      numModulesFlat 3
      numModulesTilted 8
      numRods 12
      
      
      Ring 4-6 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 35
          ringOuterRadius 38
          tiltAngle 67.0
          theta_g 33.0
      }
        
      Ring 7-11 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 35
          ringOuterRadius 37
          tiltAngle 80.0
          theta_g 20.0
      }
        
      Ring 4 {
        ringZOverlap 4.86983
      }
      Ring 5 {
        ringZOverlap 10.8403
      }
      Ring 6 {
        ringZOverlap 10.8403
      }
      Ring 7 {
        ringZOverlap 9.83559
      }
      Ring 8 {
        ringZOverlap 9.00687
      }
      Ring 9 {
        ringZOverlap 9.00687
      }
      Ring 10 {
        ringZOverlap 9.00687
      }
      Ring 11 {
        ringZOverlap 9.00687
      }
      
    }
    
    
    
    Layer 2 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_1x1_50x50
      //@includestd CMS_Phase2/Pixel/Materials/module_BPIX_v2_L2_1x2_2500
      //@includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L2
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_50x50
      destination BPIX2
      layerRotation 0.112
      radiusMode fixed
      placeRadiusHint 60
      
      isTilted true
      isTiltedAuto true
      numModulesFlat 4
      numModulesTilted 9
      numRods 24
      
      
      Ring 5-8 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 66
          ringOuterRadius 70
          tiltAngle 59.0
          theta_g 41.0
      }
        
      Ring 9-13 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 66
          ringOuterRadius 69
          tiltAngle 74.0
          theta_g 28.0
      }
          
      Ring 5 {
        ringZOverlap 3.85009
      }
      Ring 6 {
        ringZOverlap 7.95957
      }
      Ring 7 {
        ringZOverlap 7.42747
      }
      Ring 8 {
        ringZOverlap 6.95021
      }
      Ring 9 {
        ringZOverlap 6.36335
      }
      Ring 10 {
        ringZOverlap 5.99113
      }
      Ring 11 {
        ringZOverlap 5.43129
      }
      Ring 12 {
        ringZOverlap 4.95021
      }
      Ring 13 {
        ringZOverlap 4.37816
      }
  
      
    }
    
    
    
    Layer 3 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_1x1_50x50
      //@includestd CMS_Phase2/Pixel/Materials/module_BPIX_v2_L3_2x2_2500
      //@includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L3
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_50x50
      destination BPIX3
      layerRotation 0.131
      radiusMode fixed
      placeRadiusHint 100
      
      isTilted true
      isTiltedAuto true
      numModulesFlat 5
      numModulesTilted 10
      numRods 40
      
      
      Ring 6-10 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 107
          ringOuterRadius 111
          tiltAngle 54.0
          theta_g 46.0
      }
        
      Ring 11-15 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 107
          ringOuterRadius 110
          tiltAngle 68.0
          theta_g 32.0
      }
     
      Ring 6 {
        ringZOverlap 2.33531
      }
      Ring 7 {
        ringZOverlap 5.21672
      }
      Ring 8 {
        ringZOverlap 5.21672
      }
      Ring 9 {
        ringZOverlap 5.21672
      }
      Ring 10 {
        ringZOverlap 5.21672
      }
      Ring 11 {
        ringZOverlap 4.70297
      }
      Ring 12 {
        ringZOverlap 4.71167
      }
      Ring 13 {
        ringZOverlap 4.76342
      }
      Ring 14 {
        ringZOverlap 4.22056
      }
      Ring 15 {
        ringZOverlap 3.72946
      }  
      
    }
    
    
    
    Layer 4 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_1x1_50x50
      //@includestd CMS_Phase2/Pixel/Materials/module_BPIX_v2_L4_2x2_2500
      //@includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L4
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_50x50
      destination BPIX4
      layerRotation 0.098
      
      
      isTilted true
      isTiltedAuto true
      numModulesFlat 6
      numModulesTilted 10
      numRods 56    
      
      Ring 7-11 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 147
          ringOuterRadius 151
          tiltAngle 48.0
          theta_g 52.0
      }
        
      Ring 12-16 {
          @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_2_R_1x1_50x50
          ringInnerRadius 147
          ringOuterRadius 151
          tiltAngle 62.0
          theta_g 38.0
      }
      
      Ring 7 {
        ringZOverlap 1.83209
      }
      Ring 8 {
        ringZOverlap 4.12589
      }
      Ring 9 {
        ringZOverlap 4.12589
      }
      Ring 10 {
        ringZOverlap 4.12589
      }
      Ring 11 {
        ringZOverlap 4.12589
      }
      Ring 12 {
        ringZOverlap 3.67832
      }
      Ring 13 {
        ringZOverlap 3.67118
      }
      Ring 14 {
        ringZOverlap 4.15047
      }
      Ring 15 {
        ringZOverlap 3.65654
      }
      Ring 16 {
        ringZOverlap 3.12232
      }
      
    }
  }
