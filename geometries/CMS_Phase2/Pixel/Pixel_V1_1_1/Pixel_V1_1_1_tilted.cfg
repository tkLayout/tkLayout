
Tracker Pixels {

  phiSegments 4
  etaCut 4.1
  zError 70

  smallDelta 0
  bigDelta 3

  servicesForcedUp false

  barrelRotation 1.57079632679
 
  @include ../Stations/stations_BPIX_Service_Cylinder_near // TODO: Test, then move it inside the barrel!

  trackingTags pixel,tracker

  Barrel PXB {
    @include ../Supports/SupportsBPIX_V0_1.cfg
    bigDelta 1.5
    //phiOverlap 0.60
    zOverlap -0.2 // 200 um gap along the stave
    beamSpotCover false
    smallDelta 0 
    numLayers 4
    startZMode modulecenter
    //numModules 5  // 4 on the right and 3 on the left
    compressed false
    innerRadius 30 
    outerRadius 146
    width 17
    length 57
    smallParity 1
    bigParity -1
    
    
    Layer 1 {
        layerRotation 0.262
        @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_1x3_50x50
        maxZ 300
        isTilted true
        isTiltedAuto true
        numRods 12
        numModulesFlat 3
        numModulesTilted 2
        
        Ring 4 {
          width 57
          length 17
          innerRadius 33
          outerRadius 35
          tiltAngle 60.0
          theta_g 20.0
          zOverlap 1.0
        }
        
        Ring 5 {
          width 57
          length 17
          innerRadius 33
          outerRadius 35
          tiltAngle 70.0
          theta_g 20.0
          zOverlap 5.0
        }
    }
    
    
    
    
    Layer 1 {
      @includestd CMS_Phase2/Pixel/Materials/module_BPIX_L1_50x50
      @includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L1
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_50x50
      destination BPIX1
      plotColor 7
      Ring 2,4 { plotColor 8 }
    }
    Layer 2 {
      phiOverlap 0.60
      numModules 5
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_1x3_50x50
      @includestd CMS_Phase2/Pixel/Materials/module_BPIX_L2_50x50
      @includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L2
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_50x50
      destination BPIX2
      plotColor 7
      Ring 2,4 { plotColor 8 }
      layerRotation 0.131
      //radiusMode fixed
      placeRadiusHint 62
    }
    Layer 3 {
      phiOverlap 0.60
      numModules 5
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_1x3_100x100
      @includestd CMS_Phase2/Pixel/Materials/module_BPIX_L3_100x100
      @includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L3
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_100x100
      destination BPIX3
      plotColor 7
      Ring 2,4 { plotColor 8 }
      layerRotation 0.079
      //radiusMode fixed
      placeRadiusHint 105
    }
    Layer 4 {
      phiOverlap 0.60
      numModules 5
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_1x3_100x100
      @includestd CMS_Phase2/Pixel/Materials/module_BPIX_L4_100x100
      @includestd CMS_Phase2/Pixel/Materials/rod_BPIX_L4
      @includestd CMS_Phase2/Pixel/Resolutions/Barrel_100x100
      destination BPIX4
      plotColor 7
      Ring 2,4 { plotColor 8 }
      layerRotation 0.056
    }
  }

  Endcap PXE {
    @include ../Supports/SupportsFPIX_V0_1.cfg
    @includestd CMS_Phase2/Pixel/Materials/disk_FPIX
    @includestd CMS_Phase2/Pixel/Conversions/flange_FPIX
    @include ../Stations/stations_FPIX_Service_Cylinder_near
    moduleShape rectangular
    alignEdges true 
    numDisks 10
    smallDelta 2 
    bigDelta 4 
    outerRadius 160 
    numRings 3
    barrelGap 10.0
    maxZ 2650
    bigParity 1
    smallParity -1
    zRotation 1.570796327
    plotColor 7
    Ring 1 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_1x3_50x50
      @includestd CMS_Phase2/Pixel/Materials/module_FPIX_R1_50x50
      @includestd CMS_Phase2/Pixel/Resolutions/Endcap_50x50
      numModules 20
      ringOuterRadius 87 
    }
    Ring 2 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_1x3_50x50
      @includestd CMS_Phase2/Pixel/Materials/module_FPIX_R2_50x50
      @includestd CMS_Phase2/Pixel/Resolutions/Endcap_50x50
      numModules 36
      ringOuterRadius 113
    }
    Ring 3 {
      @include-std CMS_Phase2/Pixel/ModuleTypes/pixel_1x3_100x100
      @includestd CMS_Phase2/Pixel/Materials/module_FPIX_R3_100x100
      @includestd CMS_Phase2/Pixel/Resolutions/Endcap_100x100
      numModules 60
      ringOuterRadius 160
    }
    Disk 1 { placeZ 310 }
    Disk 2 { placeZ 398.6 }
    Disk 3 { placeZ 512.4 }
    Disk 4 { placeZ 658.8 }
    Disk 5 { placeZ 847 }
    Disk 6 { placeZ 1088.9 }
    Disk 7 { placeZ 1400 }
    Disk 8 { placeZ 2000 }
    Disk 9 { placeZ 2302.2 }
    Disk 10 { placeZ 2650 }

    Disk 1  { destination FPIX1 }
    Disk 2  { destination FPIX2 }
    Disk 3  { destination FPIX3 }
    Disk 4  { destination FPIX4 }
    Disk 5  { destination FPIX5 }
    Disk 6  { destination FPIX6 }
    Disk 7  { destination FPIX7 }
    Disk 8  { destination FPIX8 }
    Disk 9  { destination FPIX9 }
    Disk 10 { destination FPIX10 }
}


}
