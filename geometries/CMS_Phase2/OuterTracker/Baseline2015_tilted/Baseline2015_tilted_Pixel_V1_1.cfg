
@includestd SimParms

Tracker Outer {
    @include ../Baseline2015_SupportsTracker.cfg

    // Layout construction parameters
    zError 70
    bigDelta 12
    zOverlap 0
    phiOverlap 0.5
    etaCut 10
    barrelRotation 1.57079632679
    smallParity 1

    trackingTags trigger,tracker

    Barrel TBPS {
      @include Baseline2015_tilted_SupportsBarrelTBPS.cfg
      Layer 1 { smallDelta 3.65 }
      Layer 2,3 { smallDelta 3.15 }
      numLayers 3
      maxZ 1150
      startZMode modulecenter
      innerRadius 230
      // outerRadius = 524 // 509 or 540
      outerRadius 508 // 509 or 540
      // outerRadius = 1080
      width 96
      length 46.26
      physicalLength 71
      phiSegments 2
      // compressed true // why not ?!?!?
      // allowCompressionCuts false // What is this?!?!
      Layer 1 { tiltedLayerSpecFile short_layer1.csv }
      Layer 2 { tiltedLayerSpecFile short_layer2.csv }
      Layer 3 { tiltedLayerSpecFile short_layer3.csv }
    }

    Barrel TB2S {
      @include ../Baseline2015_SupportsBarrelTB2S.cfg
      bigDelta 15.8 // Antti 2015-02-18
      smallDelta 2.25 // Antti 2015-02-18
      numLayers 3
      numModules 12
      startZMode moduleedge
      innerRadiusFixed true
      outerRadiusFixed true
      innerRadius 687  // ideal = 687.134
      outerRadius 1080 // ideal =~ 1090
      sameRods true
      compressed false

      forbiddenRange 91-95

      // Directives and options
      width 91.44
      length 100.5
      phiSegments 2
    }

    Endcap TEDD {
      // Mandatory parameters
      bigDelta 14.95  // NICK 2015
      smallDelta 7.4  // NICK 2015
      phiSegments 4
      numDisks 5
      phiOverlap 0
      // innerRadius = 278 // 222 is eta=2.5
      numRings 15
      outerRadius 1095
      barrelGap 180.
      maxZ 2650 
      bigParity 1
      Ring 14 { ringGap 0.0 }  // NICK
      Ring 13 { ringGap 0.0 }  // NICK
      Ring 12 { ringGap 0.0 }  // NICK
      Ring 11 { ringGap 0.0 }  // NICK
      Ring 10 { ringGap 0.0 }  // NICK
      Ring 9 { ringGap 0.0 }  // NICK
      Ring 8 { ringGap 0.0 }  // NICK
      Ring 7 { ringGap 0.0 }  // NICK
      Ring 6 { ringGap 0.0 }  // NICK
      Ring 5 { ringGap 0.0 }  // NICK
      Ring 4 { ringGap 0.0 }  // NICK
      Ring 3 { ringGap 0.0 }  // NICK
      Ring 2 { ringGap 0.0 }  // NICK
      Ring 1 { ringGap 0.0 }  // NICK
      alignEdges false
      moduleShape rectangular
      
      Ring 1-9 {
        width 96
        length 46.26
      }
      Ring 10-12 { smallDelta 8.85 }  // NICK
      Ring 13-15 { smallDelta 7.95 }  // NICK
      Ring 10-15 {
        width 91.44
        length 100.5
      }
    }

    Barrel TBPS {
      @includestd ModuleTypes/ptPS
      @includestd Conversions/flangeTBPS
      Layer 1 { 
        dsDistance 2.6
        triggerWindow 5 
        Ring 5-6 {
          triggerWindow 5
          dsDistance 2.6
        }
        Ring 7 {
          triggerWindow 4
          dsDistance 2.6
        }
        Ring 8-9 {
          triggerWindow 5
          dsDistance 4.0
        }
        Ring 10-11 {
          triggerWindow 4
          dsDistance 4.0
        }
        Ring 12-13 {
          triggerWindow 3
          dsDistance 4.0
        }
        Ring 14-15 {
          triggerWindow 2
          dsDistance 4.0
        }
	  Ring 1-3 { 
	    @include ../Materials/TBPS_L1_flat 
	  }
	  Ring 4 { 
	    @include ../Materials/TBPS_L1_central 
	  }
  	  Ring 5-15 { 
	    @include ../Materials/TBPS_L1_tilted 
	  }
      }
      Layer 2 { 
        triggerWindow 5
        dsDistance 1.6
        Ring 7-9 {
          triggerWindow 5
          dsDistance 2.6
        }
        Ring 10-11 {
          triggerWindow 5
          dsDistance 2.6
        }
        Ring 12-13 {
          triggerWindow 4
          dsDistance 2.6
        }
        Ring 14-18 {
          triggerWindow 7
          dsDistance 4.0
        }
	  Ring 1-5 { 
	    @include ../Materials/TBPS_L2_flat 
	  }
	  Ring 6 { 
	    @include ../Materials/TBPS_L2_central 
	  }
  	  Ring 7-18 { 
	    @include ../Materials/TBPS_L2_tilted 
	  }
      }
      Layer 3 { 
        triggerWindow 7
        dsDistance 1.6 
        Ring 9-10 {
          triggerWindow 8
          dsDistance 2.6
        }
        Ring 11-13 {
          triggerWindow 7
          dsDistance 2.6
        }
        Ring 14 {
          triggerWindow 6
          dsDistance 2.6
        }
        Ring 15 {
          triggerWindow 6
          dsDistance 2.6
        }
        Ring 16-20 {
          triggerWindow 5
          dsDistance 2.6
        }
        Ring 21 {
          triggerWindow 4
          dsDistance 2.6
        }
	  Ring 1-7 { 
	    @include ../Materials/TBPS_L3_flat 
	  }
	  Ring 8 { 
	    @include ../Materials/TBPS_L3_central 
	  }
  	  Ring 9-21 { 
	    @include ../Materials/TBPS_L3_tilted 
	  }
      }
    }

    Barrel TB2S {
      @includestd ModuleTypes/pt2S
      @include ../Materials/pt2S_320_18
      @include ../Materials/rodPt2S
      @includestd Conversions/flangeTB2S

      dsDistance 1.8
      Layer 1 { triggerWindow 9 }
      Layer 2 { triggerWindow 12 }
      Layer 3 { triggerWindow 15 }
    }

    Endcap TEDD {
      @includestd Materials/disk
      @includestd Conversions/flangeTEDD
  
      Disk 1 {
        Ring 1-9 { 
	  dsDistance 4.0
     	  @includestd ModuleTypes/ptPS
          @include ../Materials/ptPS_320_40
        } 
  	Ring 10 { 
	  dsDistance 4.0
          @includestd ModuleTypes/pt2S 
          @include ../Materials/pt2S_320_40
	}
    	Ring 11-15 {
          smallDelta 7.95  // NICK
          dsDistance 1.8
          @includestd ModuleTypes/pt2S
          @include ../Materials/pt2S_320_18
    	}
    	Ring 1 { triggerWindow 2 }
 	Ring 2 { triggerWindow 2 }
    	Ring 3 { triggerWindow 3 }
    	Ring 4 { triggerWindow 4 }
    	Ring 5 { triggerWindow 5 }  
    	Ring 6 { triggerWindow 6 }  
    	Ring 7 { triggerWindow 6 }
    	Ring 8 { triggerWindow 6 }
    	Ring 9 { triggerWindow 8 }
    	Ring 10 { triggerWindow 10 }
    	Ring 11 { triggerWindow 6 }
    	Ring 12 { triggerWindow 7 }
    	Ring 13 { triggerWindow 9 }
    	Ring 14 { triggerWindow 11 }
    	Ring 15 { triggerWindow 12 }
      } 

      Disk 2 {
        Ring 1-9 { 
          dsDistance 4.0
          @includestd ModuleTypes/ptPS
          @include ../Materials/ptPS_320_40
        } 
        Ring 10 { 
          dsDistance 4.0
          @includestd ModuleTypes/pt2S
          @include ../Materials/pt2S_320_40
        }
        Ring 11-15 {
          smallDelta 7.95  // NICK          
          dsDistance 1.8
          @includestd ModuleTypes/pt2S
          @include ../Materials/pt2S_320_18
        }
        Ring 1 { triggerWindow 2 }
        Ring 2 { triggerWindow 2 }
        Ring 3 { triggerWindow 2 }
        Ring 4 { triggerWindow 4 }
        Ring 5 { triggerWindow 5 }  
        Ring 6 { triggerWindow 5 }  
        Ring 7 { triggerWindow 6 }
        Ring 8 { triggerWindow 7 }
        Ring 9 { triggerWindow 7 }
        Ring 10 { triggerWindow 9 }
        Ring 11 { triggerWindow 6 }
        Ring 12 { triggerWindow 7 }
        Ring 13 { triggerWindow 8 }
        Ring 14 { triggerWindow 10 }
        Ring 15 { triggerWindow 10 }
      }

      Disk 3 {
        Ring 1-9 { 
          dsDistance 4.0
          @includestd ModuleTypes/ptPS
          @include ../Materials/ptPS_320_40
        } 
        Ring 10-11 { 
          dsDistance 4.0
          @includestd ModuleTypes/pt2S 
          @include ../Materials/pt2S_320_40
        }
        Ring 12-15 {
          smallDelta 7.95  // NICK
          dsDistance 1.8
          @includestd ModuleTypes/pt2S 
          @include ../Materials/pt2S_320_18
        }
        Ring 1 { triggerWindow 1 }
        Ring 2 { triggerWindow 1 }
        Ring 3 { triggerWindow 2 }
        Ring 4 { triggerWindow 3 }
        Ring 5 { triggerWindow 4 }  
        Ring 6 { triggerWindow 5 }  
        Ring 7 { triggerWindow 6 }
        Ring 8 { triggerWindow 6 }
        Ring 9 { triggerWindow 7 }
        Ring 10 { triggerWindow 8 }
        Ring 11 { triggerWindow 10 }
        Ring 12 { triggerWindow 6 }
        Ring 13 { triggerWindow 7 }
        Ring 14 { triggerWindow 9 }
        Ring 15 { triggerWindow 10 }
      }

      Disk 4 {
        Ring 1-9 { 
          dsDistance 4.0
          @includestd ModuleTypes/ptPS
          @include ../Materials/ptPS_320_40
        } 
        Ring 10-11 { 
          dsDistance 4.0
          @includestd ModuleTypes/pt2S
          @include ../Materials/pt2S_320_40
        }
        Ring 12-15 {
          smallDelta 7.95  // NICK
          dsDistance 1.8
          @includestd ModuleTypes/pt2S
          @include ../Materials/pt2S_320_18
        }
        Ring 1 { triggerWindow 1 }
        Ring 2 { triggerWindow 1 }
        Ring 3 { triggerWindow 2 }
        Ring 4 { triggerWindow 3 }
        Ring 5 { triggerWindow 4 }  
        Ring 6 { triggerWindow 4 }  
        Ring 7 { triggerWindow 5 }
        Ring 8 { triggerWindow 6 }
        Ring 9 { triggerWindow 6 }
        Ring 10 { triggerWindow 7 }
        Ring 11 { triggerWindow 9 }
        Ring 12 { triggerWindow 6 }
        Ring 13 { triggerWindow 7 }
        Ring 14 { triggerWindow 8 }
        Ring 15 { triggerWindow 9 }
      }

      Disk 5 {
        Ring 1-9 { 
          dsDistance 4.0
          @includestd ModuleTypes/ptPS
          @include ../Materials/ptPS_320_40
        } 
        Ring 10-12 {
          dsDistance 4.0
          @includestd ModuleTypes/pt2S 
          @include ../Materials/pt2S_320_40
        }
        Ring 13-15 {
          dsDistance 1.8
          @includestd ModuleTypes/pt2S 
          @include ../Materials/pt2S_320_18
        }
        //Ring 1 { triggerWindow 1 }
        //Ring 2 { triggerWindow 1 }
        Ring 3 { triggerWindow 2 }
        Ring 4 { triggerWindow 3 }
        Ring 5 { triggerWindow 3 }  
        Ring 6 { triggerWindow 4 }  
        Ring 7 { triggerWindow 5 }
        Ring 8 { triggerWindow 5 }
        Ring 9 { triggerWindow 6 }
        Ring 10 { triggerWindow 6 }
        Ring 11 { triggerWindow 6 }
        Ring 12 { triggerWindow 8 }
        Ring 13 { triggerWindow 6 }
        Ring 14 { triggerWindow 7 }
        Ring 15 { triggerWindow 8 }
      }
      
      Disk 1-5 {
        Ring 8 { 
          frontEndHybridWidth 6.5// 5.05 hybrid + 1.45 inactive silicon // OK 
        }
        Ring 10 { 
          frontEndHybridWidth 16.725 // 15.625 hybrid + 1.1 inactive silicon // OK 
        }  
      }
      
  }
  
  
}





Support {
  midZ 290
}

@include ../../Pixel/Pixel_V1_1.cfg


