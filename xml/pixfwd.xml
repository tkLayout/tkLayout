<?xml version="1.0"?>
<DDDefinition xmlns="http://www.cern.ch/cms/DDL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.cern.ch/cms/DDL ../../../DetectorDescription/Schema/DDLSchema.xsd">
    

<ConstantsSection label="pixfwd.xml" eval="true">
 <Constant name="zero" value="0.0*fm"/>
 <!-- <Constant name="RootRadius"     value="[pixfwdCylinder:CylindersOuterRmax]"/>-->
 <Constant name="RootRadius"     value="20.1*cm"/>
 <Constant name="RootHalfLength" value="[pixfwdCylinder:CylindersOuterLength]/2.+ [pixfwdCylinder:CylindersEndFlangeLength]/2.+[Zextension]/2."/>

 <Constant name="AnchorZ"        value="0.*mm"/>
 <Constant name="ZPixelForward"  value="291.*mm"/>
 <Constant name="RootStartZ"     value="-4*mm"/> <!-- -2*mm-->
 <Constant name="RootMidZ1"      value="[cms:TrackLumiZ1]-[ZPixelForward]"/>
 <Constant name="RootMidZ2"      value="[cms:TrackLumiZ2]-[ZPixelForward]"/>
 <Constant name="RootMidZ3"      value="[cms:TrackBeamZ1]-[ZPixelForward]"/>
 <Constant name="RootEndZ"       value="2*[RootHalfLength]"/>
 <Constant name="Zextension"      value="273.11*mm"/>
 <Constant name="ZextensionCables"      value="203.5*mm"/>

 <Constant name="ZCylinder"      value="[AnchorZ]"/>
 
    <Constant name="Conn3Rout" value="19.0*cm"/>
    <Constant name="Conn3Rin" value="18.0*cm"/>
    <Constant name="Conn4Rin" value="18.0*cm"/>
    <Constant name="Conn3T" value="51.0*cm"/>
    <Constant name="Conn4T" value="120.00*cm"/>
    <Constant name="ConnToSTZ" value="30.50*cm"/>
    <Constant name="Conn3Z" value="54.62*cm-[ZPixelForward]"/>
    <Constant name="Conn4Z" value="[Conn3Z]+([Conn3T]+[Conn4T])/2"/>
    <Constant name="ServiceRout" value="21.0*cm"/>
    <Constant name="ServiceRin" value="18.0*cm"/>
    <Constant name="ServT" value="48.5*cm"/>
    <Constant name="ServZ" value="[Conn4Z]+([Conn4T]+[ServT])/2"/>
    <Constant name="ServCablT" value="32.2*cm"/>
    <Constant name="ServCablZ" value="[ServZ]+[ServT]/2+[ServCablT]/2"/>
    <Constant name="RinSupTubCab" value="18.00*cm"/>

</ConstantsSection>
<SolidSection label="pixfwd.xml">
 <Polycone name="Forward" startPhi="0*deg" deltaPhi="360*deg" >
   <ZSection z="[RootStartZ]" rMin="[cms:TrackBeamR1]" rMax="18.0*cm"/>
   <ZSection z="0.02*cm" rMin="[cms:TrackBeamR1]" rMax="18.0*cm"/>
   <ZSection z="0.02*cm" rMin="[cms:TrackBeamR1]" rMax="19.0*cm"/>
   <ZSection z="89.9*cm" rMin="[cms:TrackBeamR1]" rMax="19.0*cm"/>
   <ZSection z="89.9*cm" rMin="[cms:TrackBeamR1]" rMax="21.6*cm"/>
   <ZSection z="99.00*cm" rMin="[cms:TrackBeamR1]" rMax="21.6*cm"/>
   <ZSection z="99.00*cm" rMin="[cms:TrackBeamR1]" rMax="116.0*cm"/>
   <ZSection z="[RootMidZ1]"   rMin="[cms:TrackLumiR1Min]" rMax="116.0*cm"/>
   <ZSection z="[RootMidZ1]"   rMin="[cms:TrackLumiR1]" rMax="116.0*cm"/>
   <ZSection z="[RootMidZ2]"   rMin="[cms:TrackLumiR1]" rMax="116.0*cm"/>
   <ZSection z="[RootMidZ2]"   rMin="[cms:TrackLumiR2Min]" rMax="116.0*cm"/>
   <ZSection z="[RootEndZ]"    rMin="[cms:TrackBeamR2]" rMax="116.0*cm"/>
   <ZSection z="[RootEndZ]+[ZextensionCables]"    rMin="[cms:TrackBeamR2]" rMax="116.0*cm"/>
</Polycone>
 <Polycone name="Phase2PixelEndcap" startPhi="0*deg" deltaPhi="360*deg" >
 <ZSection z="[RootStartZ]"  rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ1]"   rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ1]"   rMin="[cms:TrackLumiR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ2]"   rMin="[cms:TrackLumiR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ2]"   rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ3]"   rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootEndZ]"    rMin="[cms:TrackBeamR2]" rMax="[RootRadius]"/>
 </Polycone>
 <Polycone name="Phase2PixelEndcapZp" startPhi="0*deg" deltaPhi="360*deg" >
 <ZSection z="[RootStartZ]+[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ1]+[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ1]+[ZPixelForward]" rMin="[cms:TrackLumiR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ2]+[ZPixelForward]" rMin="[cms:TrackLumiR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ2]+[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootMidZ3]+[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="[RootEndZ]+[ZPixelForward]" rMin="[cms:TrackBeamR2]" rMax="[RootRadius]"/>
 </Polycone>
 <Polycone name="Phase2PixelEndcapZm" startPhi="0*deg" deltaPhi="360*deg" >
 <ZSection z="-[RootStartZ]-[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="-[RootMidZ1]-[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="-[RootMidZ1]-[ZPixelForward]" rMin="[cms:TrackLumiR1]" rMax="[RootRadius]"/>
 <ZSection z="-[RootMidZ2]-[ZPixelForward]" rMin="[cms:TrackLumiR1]" rMax="[RootRadius]"/>
 <ZSection z="-[RootMidZ2]-[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="-[RootMidZ3]-[ZPixelForward]" rMin="[cms:TrackBeamR1]" rMax="[RootRadius]"/>
 <ZSection z="-[RootEndZ]-[ZPixelForward]" rMin="[cms:TrackBeamR2]" rMax="[RootRadius]"/>
 </Polycone>
 <UnionSolid name="Phase2PixelEndcaps" firstSolid="pixfwd:Phase2PixelEndcapZp" secondSolid="pixfwd:Phase2PixelEndcapZm">
 <Translation x="0*cm" y="0*cm" z="0*cm"/>
 </UnionSolid>
    <SubtractionSolid name="Phase2OTForward">
      <rSolid name="Forward"/>
      <rSolid name="Phase2PixelEndcap"/>
      <Translation x="0*cm" y="0*cm" z="0*cm"/>
    </SubtractionSolid>
</SolidSection>
<LogicalPartSection label="pixfwd.xml">
 <LogicalPart name="Phase2PixelEndcap" category="envelope">
  <rSolid name="Phase2PixelEndcap"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
 <LogicalPart name="Phase2OTForward" category="envelope">
  <rSolid name="Phase2OTForward"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
</LogicalPartSection>
</DDDefinition>
