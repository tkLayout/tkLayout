@include SimParms

BeamPipe Pipe {

    radius         20.0   // mm
    thickness      1.0    // mm
    radLength      0.00286
    intLength      0.00236 
}

Tracker Inner {

    // Beam parameters
    zError 0
    
    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
  
    zOverlap 0.0 //0.5
    phiOverlap 0.0 //0.5
    rOverlap 0.0 //0.5
    
    barrelRotation 1.5707963268 // Starts building modules from X=0, Ymax    
    smallParity -1
    bigParity 1
    
    innerRadiusFixed true 
    outerRadiusFixed true
    //useMinMaxRCorrect false
    
    // Detector constraints
    etaCut 6
    trackingTags pixel,tracker  
    
    
    Barrel BRL_0 {
    
      numLayers 2 
      radiusMode fixed
      
      bigDelta 1.0
      smallDelta 0.0
      zOverlap 0.0
      
      startZMode modulecenter
      
      //sameRods true
      
      innerRadius 23.5 
      outerRadius 102.5
     
      Layer 1 { radius 25.0 }
      Layer 2 { radius 80.0 }
      //Layer 2 { radius 60.0 }
      //Layer 3 { radius 100.0 }
      
            

      Layer 1 {
       isTilted false
       
       phiSegments 2
       outerZ 685 //415 //380
       
       startZMode moduleedge
       
       width 12.8
       length 68.5
       physicalLength 68.5 // 41.5     
       moduleType pixelInner
       plotColor 2
       @include Pixel_BRL0_module0.cfg
       @include Pixel_material_innermost.cfg
       resolutionLocalX 0.0075
       resolutionLocalY 0.015
      }
      
      Layer 2 {      
       //outerZ 820

       width 25.6
       length 82.0
       physicalLength 82.0
       moduleType pixelInner
       //startZMode moduleedge
       plotColor 2
       @include Pixel_BRL0_module1.cfg
       @include Pixel_material_innermost.cfg
       resolutionLocalX 0.0075
       resolutionLocalY 0.015  
           
       isTilted true
       isTiltedAuto true
       numModulesFlat 2
       numModulesTilted 3

       numberRods 26  // 16 + 26 in flat layout
    
       Ring 3-5 {
          ringInnerRadius 78.0
          ringOuterRadius 83.0
          tiltAngle 74.0
          theta_g 36.0
       }

       Ring 3     { ringZOverlap 20 }
       Ring 4     { ringZOverlap 40 }
       Ring 5     { ringZOverlap 30 }     
      }          
    }



    Barrel BRL_1 {
      
      numLayers 3 
      sameRods true
      radiusMode fixed
      
      startZMode modulecenter

      innerRadius 197.0
      outerRadius 460.0
      Layer 1 { radius 205 }
      Layer 2 { radius 325 }
      Layer 3 { radius 450 }
      
      //phiSegments 2
      
      width 51.2
      length 102.4
      physicalLength 102.4
      moduleType pixel
      plotColor 7
      @include Pixel_BRL1_module0.cfg
      @include Pixel_material.cfg
      resolutionLocalX 0.0095
      resolutionLocalY 0.030
      
      //outerZ 820
      
 
      Layer 1 {      
       isTilted true
       isTiltedAuto true
       numModulesFlat 2
       numModulesTilted 4

       numberRods 30  // 26 in flat layout
    
       Ring 3-6 {
          ringInnerRadius 196.0
          ringOuterRadius 215.0
          tiltAngle 60.0
          theta_g 40.0
       }

       Ring 3     { ringZOverlap 10 }
       Ring 4     { ringZOverlap 30 }
       Ring 5     { ringZOverlap 20 }  
       Ring 6     { ringZOverlap 10 }   
      } 
      
      
      Layer 2 {      
       isTilted true
       isTiltedAuto true
       numModulesFlat 3
       numModulesTilted 4

       numberRods 46  // 42 in flat layout
    
       Ring 4-7 {
          ringInnerRadius 316.0
          ringOuterRadius 334.0
          tiltAngle 56.0
          theta_g 54.0
       }

       Ring 4     { ringZOverlap 10 }
       Ring 5-6     { ringZOverlap 20 }
       Ring 7     { ringZOverlap 10 }     
      }
      
      
      Layer 3 {      
       isTilted true
       isTiltedAuto true
       numModulesFlat 4
       numModulesTilted 4

       numberRods 60  // 56 in flat layout
    
       Ring 5-8 {
          ringInnerRadius 441.0
          ringOuterRadius 459.0
          tiltAngle 52.0
          theta_g 58.0
       }

       Ring 5     { ringZOverlap 10 }
       Ring 6-8     { ringZOverlap 25 }     
      }          
      
    }
    
    
    Endcap ECAP {
      //@includestd Conversions/flangeTEDD
      @include Pixel_Fwd_module.cfg
      @include Pixel_material.cfg
    
      phiSegments 4
      numDisks 5
      innerRadius 24
      outerRadius 450
      barrelGap 180
      innerZ 1000     // ECAP is identical as in version FCChh_Option3
      outerZ 2250 
      alignEdges false
      moduleShape wedge
      moduleType pixel
      plotColor 7

      Disk 1-5 {
        Ring 1 {
          waferDiameter 86.2
          additionalModules 0
          resolutionLocalX 0.0075
          resolutionLocalY 0.015
          plotColor 5 
        }
        Ring 2 {
          waferDiameter 102.2
          additionalModules 2
          resolutionLocalX 0.0095
          resolutionLocalY 0.030
        }
        Ring 3 {
          waferDiameter 102.2
          additionalModules 3
          resolutionLocalX 0.0095
          resolutionLocalY 0.030
        }
        Ring 4 {
          waferDiameter 102.2
          additionalModules 4
          resolutionLocalX 0.0095
          resolutionLocalY 0.030
        }
        Ring 5 {
          waferDiameter 102.2
          additionalModules 5
          resolutionLocalX 0.0095
          resolutionLocalY 0.030
        }
      }
    }
}
Tracker Outer {

    // Beam parameters
    zError 0
    zOverlap 0.5  
    rOverlap 0.5
    
    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
    
    
    barrelRotation 1.57079632679
    smallParity 1
    bigParity 1
    
    innerRadiusFixed true
    outerRadiusFixed true
 
    //useMinMaxRCorrect false
    plotColor 1
    
    // Detector constraints
    etaCut 6
    

        
    Barrel BRL {   
    
    
      @include Strip_Outer_module.cfg
      @include Strip_material.cfg 
      
      numLayers 6 
      
      startZMode modulecenter
      radiusMode fixed
      innerRadius 600
      outerRadius 1550 //1545
      
      Layer 1 { radius 607.60 }
      Layer 2 { radius 807.36 }
      Layer 3 { radius 969.71 }
      Layer 4 { radius 1164.47 }
      Layer 5 { radius 1359.19 }
      Layer 6 { radius 1541.55 }
     
      sameRods true
      
      width 102.4
      length 102.4
      physicalLength 102.4
      moduleType strip
      plotColor 1
      resolutionLocalX 0.0095
      resolutionLocalY 14.780 //0.100
    
      trackingTags strip,tracker
           
      
      // Example of flat Layer 1
      //Layer 1 {
      //  isTilted false      
      //  phiSegments 2
      //  phiOverlap 0.5
      //  outerZ 2250     
      //}
          
  
      Layer 1 {     
        isTilted true  
        isTiltedAuto true
        numModulesFlat 5
        numModulesTilted 9

        numberRods 40  // 38 in flat layout
    
        Ring 6-9 {
          ringInnerRadius 597.0
          ringOuterRadius 619.0
          tiltAngle 48.0
          theta_g 62.0
        }
        Ring 10-14 {
          ringInnerRadius 597.0
          ringOuterRadius 608.0
          tiltAngle 69.0
          theta_g 31.0
        }

        Ring 6     { ringZOverlap 4 }  
        Ring 7-8   { ringZOverlap 8 } 
        Ring 9-14  { ringZOverlap 6 }         
     }  
      
      
      Layer 2 {     
        isTilted true  
        isTiltedAuto true
        numModulesFlat 6
        numModulesTilted 10

        numberRods 52  // 50 in flat layout
    
        Ring 7-10 {
          ringInnerRadius 797.0
          ringOuterRadius 818.0
          tiltAngle 45.0
          theta_g 65.0
        }
        Ring 11-16 {
          ringInnerRadius 797.0
          ringOuterRadius 812.0
          tiltAngle 63.0
          theta_g 37.0
        }

        Ring 7     { ringZOverlap 4 }  
        Ring 8-10  { ringZOverlap 8.5 } 
        Ring 11    { ringZOverlap 7 }
        Ring 12    { ringZOverlap 8 } 
        Ring 13-16 { ringZOverlap 8 }          
     }
     
     
     
      Layer 3 {      
        isTilted true  
        isTiltedAuto true
        numModulesFlat 8
        numModulesTilted 9

        numberRods 62  // 60 in flat layout
    
        Ring 9-12 {
          ringInnerRadius 960.0
          ringOuterRadius 980.0
          tiltAngle 46.0
          theta_g 64.0
        }
        Ring 13-17 {
          ringInnerRadius 960.0
          ringOuterRadius 977.0
          tiltAngle 61.0
          theta_g 49.0
        }

        Ring 9     { ringZOverlap 4 }  
        Ring 10-12  { ringZOverlap 5 } 
        Ring 13    { ringZOverlap 3 } 
        Ring 14    { ringZOverlap 5 } 
        Ring 15-17  { ringZOverlap 4 } 
     }
     
     
      Layer 4 {     
        isTilted true  
        isTiltedAuto true
        numModulesFlat 9
        numModulesTilted 9

        numberRods 74  // 72 in flat layout
    
        Ring 10-13 {
          ringInnerRadius 1154.0
          ringOuterRadius 1175.0
          tiltAngle 45.0
          theta_g 65.0
        }
        Ring 14-18 {
          ringInnerRadius 1154.0
          ringOuterRadius 1171.0
          tiltAngle 57.0
          theta_g 53.0
        }

        Ring 10     { ringZOverlap 2 }  
        Ring 11-13  { ringZOverlap 4 }
        Ring 14     { ringZOverlap 3 } 
        Ring 15-16  { ringZOverlap 4 }
        Ring 17-18  { ringZOverlap 2 }
     }
     
     
      Layer 5 {     
        isTilted true  
        isTiltedAuto true
        numModulesFlat 10
        numModulesTilted 9

        numberRods 86  // 84 in flat layout
    
        Ring 11-16 {
          ringInnerRadius 1349.0
          ringOuterRadius 1369.0
          tiltAngle 45.0
          theta_g 65.0
        }
        Ring 17-19 {
          ringInnerRadius 1349.0
          ringOuterRadius 1367.0
          tiltAngle 56.0
          theta_g 54.0
        }

        Ring 11     { ringZOverlap 3 }  
        Ring 12-14  { ringZOverlap 4 }
        Ring 15-19  { ringZOverlap 3 }        
     }
     
     
     Layer 6 {     
        isTilted true  
        isTiltedAuto true
        numModulesFlat 11
        numModulesTilted 9

        numberRods 98   // 96 in flat layout
    
        Ring 12-18 {
          ringInnerRadius 1531.0
          ringOuterRadius 1552.0
          tiltAngle 45.0
          theta_g 65.0
        }
        Ring 19-20 {
          ringInnerRadius 1531.0
          ringOuterRadius 1550.0
          tiltAngle 54.0
          theta_g 56.0
        }

        Ring 12     { ringZOverlap 4 }  
        Ring 13-15  { ringZOverlap 6 }
        Ring 16-20  { ringZOverlap 6 }  
     }  
  }  
    
    
    Endcap ECAP {
      //@includestd Conversions/flangeTEDD

      phiSegments 4
      phiOverlap 0.5
      numDisks 6
      innerRadius 25
      outerRadius 1545
      barrelGap 375
      innerZ 2625     // ECAP is identical as in version FCChh_Option3
      outerZ 5000
      alignEdges false

      Ring 1 {
       moduleShape wedge
       moduleType pixel 
       plotColor 5
       
       trackingTags pixel,tracker       
       @include Pixel_Fwd_module.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0075
       resolutionLocalY 0.015
      }
      Ring 2-6 {
       moduleShape wedge
       moduleType pixel 
       plotColor 7
       
       trackingTags pixel,tracker       
       @include Pixel_Fwd_module.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 0.030
      }
      Ring 7-22 {
       moduleShape rectangular
       width 102.4
       length 108.4
       physicalLength 108.4
       moduleType strip
       plotColor 1

       trackingTags strip,tracker
       @include Strip_Fwd_module.cfg
       @include Strip_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 15.646 //0.100
     } 

      Ring 1 {
       waferDiameter 86.2
       additionalModules 0
      }
      Ring 2 {
       waferDiameter 113.0
       additionalModules 2
      }
      Ring 3 {
       waferDiameter 114.8
       additionalModules 3
      }
      Ring 4 {
       waferDiameter 112.6
       additionalModules 4
      }
      Ring 5 {
       waferDiameter 118.6
       additionalModules 5
      }
      Ring 6 {
       waferDiameter 113.7
       additionalModules 5
      }
    }
}

Tracker FwdHelp {

    // Beam parameters
    zError 0

    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
    zOverlap 0.5
    phiOverlap 0.5
    rOverlap 0.5
    barrelRotation 1.57079632679
    smallParity 1
    bigParity 1
    innerRadiusFixed true
    outerRadiusFixed true
    //useMinMaxRCorrect false
    plotColor 1

    // Detector constraints
    etaCut 6

    Endcap ECAP {
      //@includestd Conversions/flangeTEDD

      phiSegments 4
      numDisks 1
      innerRadius 40
      outerRadius 1100
      barrelGap 7500
      outerZ 7500
      alignEdges false

      Ring 1 {
       moduleShape wedge
       moduleType pixel
       plotColor 8

       trackingTags pixel,tracker
       @include Pixel_Fwd_module.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 0.015

      }

      Ring 2-6 {
       moduleShape wedge
       moduleType pixel 
       plotColor 7
       
       trackingTags pixel,tracker       
       @include Pixel_Fwd_module.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 0.030

      }
      Ring 7-20 {
       moduleShape rectangular
       width 102.4
       length 116.4
       physicalLength 116.4
       moduleType strip
       plotColor 1

       trackingTags strip,tracker
       @include Strip_Fwd_module.cfg
       @include Strip_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 16.800 //0.100
     } 

      Ring 1 {
       waferDiameter 86.2
       additionalModules 0
      }
      Ring 2 {
       waferDiameter 113.0
       additionalModules 2
      }
      Ring 3 {
       waferDiameter 114.8
       additionalModules 3
      }
      Ring 4 {
       waferDiameter 112.6
       additionalModules 4
      }
      Ring 5 {
       waferDiameter 118.6
       additionalModules 5
      }
      Ring 6 {
       waferDiameter 113.7
       additionalModules 5
      }
    }
}

Tracker Fwd {

    // Beam parameters
    zError 0

    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
    zOverlap 0.5
    phiOverlap 0.5
    rOverlap 0.5
    barrelRotation 1.57079632679
    smallParity 1
    bigParity 1
    innerRadiusFixed true
    outerRadiusFixed true
    //useMinMaxRCorrect false
    plotColor 1

    // Detector constraints
    etaCut 6

    Endcap ECAP {
      //@includestd Conversions/flangeTEDD

      phiSegments 4
      numDisks 6
      innerRadius 60
      outerRadius 1545 //1980
      barrelGap 10000 //12000
      outerZ 16000 //10900
      alignEdges false

      Ring 1 {
       moduleShape wedge
       moduleType pixel 
       plotColor 8
       
       trackingTags pixel,tracker       
       @include Pixel_Fwd_module.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 0.015

      }
      Ring 2-6 {
       moduleShape wedge
       moduleType pixel 
       plotColor 7
       
       trackingTags pixel,tracker       
       @include Pixel_Fwd_module.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 0.030

      }
      Ring 7-24 {
       moduleShape rectangular
       width 102.4
       length 116.4
       physicalLength 116.4
       moduleType strip
       plotColor 1

       trackingTags strip,tracker
       @include Strip_Fwd_module.cfg
       @include Strip_material.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 16.800 //0.100
     } 

      Ring 1 {
       waferDiameter 86.2
       additionalModules 0
      }
      Ring 2 {
       waferDiameter 113.0
       additionalModules 2
      }
      Ring 3 {
       waferDiameter 114.8
       additionalModules 3
      }
      Ring 4 {
       waferDiameter 112.6
       additionalModules 4
      }
      Ring 5 {
       waferDiameter 118.6
       additionalModules 5
      }
      Ring 6 {
       waferDiameter 113.7
       additionalModules 5
      }
    }
}
